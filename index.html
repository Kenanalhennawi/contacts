<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flydubai — Share Department Contacts</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="color-scheme" content="light dark" />
</head>
<body>
  <main class="wrap">
    <header class="top">
      <h1>Share Department Contact with Passenger</h1>
      <p class="muted">Select department and city, then send the official contact to the passenger via email and/or WhatsApp.</p>
    </header>

    <section class="grid">
      <div>
        <label>Department</label>
        <select id="deptSelect" aria-label="Select department"></select>
      </div>
      <div>
        <label>City / Station</label>
        <select id="citySelect" aria-label="Select city or station"></select>
      </div>
    </section>

    <section class="card" id="contactCard" hidden>
      <div class="card-title">Department contact</div>
      <div id="contactEmail"></div>
      <div id="contactPhone"></div>
      <div id="contactHours" class="muted"></div>
    </section>

    <section class="grid mt">
      <div>
        <label>Passenger Email</label>
        <input id="paxEmail" type="email" placeholder="passenger@example.com" />
      </div>
      <div>
        <label>Passenger WhatsApp (E.164)</label>
        <input id="paxPhone" placeholder="+9715XXXXXXXX" />
      </div>
    </section>

    <section class="mt">
      <label>Optional note to include</label>
      <textarea id="paxNote" rows="4" placeholder="Any extra info to include (optional)"></textarea>
      <!-- Honeypot (anti-bot) -->
      <input type="text" id="company" autocomplete="off" tabindex="-1" aria-hidden="true" class="hp" />
    </section>

    <section class="card" id="previewCard">
      <div class="muted">Preview of the message:</div>
      <pre id="preview" class="pre"></pre>
    </section>

    <section class="actions">
      <button class="btn primary" id="sendEmail">Send Email</button>
      <button class="btn dark" id="sendWA">Send WhatsApp (Business API)</button>
      <a class="btn whatsapp" id="openWA" target="_blank" rel="noopener">Open WhatsApp (Click-to-Chat)</a>
      <button class="btn copy" id="copyMsg">Copy Message</button>
    </section>

    <p id="status" class="status" role="status" aria-live="polite"></p>

    <footer class="muted small">
      Emails are sent from <code>no-reply@yourdomain.com</code> (via SendGrid). WhatsApp is sent from your Business number (Cloud API),
      or you can open a pre-filled chat with the “Open WhatsApp” button.
    </footer>
  </main>

  <script>
    window.CONFIG = {
      // ← set this to your actual Worker URL (e.g., https://flydubai-contacts.kenan-alhennawi.workers.dev)
      WORKER_URL: 'https://kenan.kenan-alhennawi.workers.dev',
      BRAND_SIGNATURE: '— Flydubai Contact Centre',
      WHATSAPP_TEMPLATE: 'contact_details',  // the approved template name you created
      WHATSAPP_TEMPLATE_LANG: 'en'
    };
  </script>
  <script src="app.js" defer></script>
</body>
</html>
