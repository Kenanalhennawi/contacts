<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Share Department Contact</title>
  <link rel="stylesheet" href="style.css"/>
  <meta name="color-scheme" content="light dark"/>
</head>
<body>
  <main class="wrap">
    <header class="top">
      <h1>Share Department Contact with Passenger</h1>
      <p class="muted">Select department and city, then send the official contact to the passenger via email and/or WhatsApp.</p>
    </header>

    <section class="grid">
      <div>
        <label>Department</label>
        <select id="deptSelect" aria-label="Select department"></select>
      </div>
      <div class="search-wrap">
        <label>Search City / Country / IATA</label>
        <input id="searchInput" placeholder="Type city, country or IATA"/>
        <div id="suggest" class="suggest"></div>
      </div>
      <div>
        <label>City / Station</label>
        <select id="citySelect" aria-label="Select city or station"></select>
      </div>
    </section>

    <section class="card" id="contactCard" hidden>
      <div class="card-head">
        <div id="cardTitle" class="card-title"></div>
        <span id="cardBadge" class="badge" hidden>Offline station</span>
      </div>
      <div class="card-cols">
        <div>
          <div class="field">
            <div class="field-label">Emails</div>
            <ul id="cardEmails" class="list"></ul>
          </div>
          <div class="field">
            <div class="field-label">Phones</div>
            <ul id="cardPhones" class="list"></ul>
          </div>
          <div class="field">
            <div class="field-label">Hours</div>
            <div id="cardHours" class="mono"></div>
          </div>
        </div>
        <div>
          <div class="field">
            <div class="field-label">Address</div>
            <div id="cardAddress" class="mono"></div>
          </div>
          <div class="map-row">
            <img id="shopMapImg" class="map-img" alt="Map" hidden/>
            <a id="cardMapLink" class="link" target="_blank" rel="noopener"></a>
          </div>
        </div>
      </div>
    </section>

    <section class="grid mt">
      <div>
        <label>Passenger Email</label>
        <input id="paxEmail" type="email" placeholder="passenger@example.com"/>
      </div>
      <div>
        <label>Passenger WhatsApp (E.164)</label>
        <input id="paxPhone" placeholder="+9715XXXXXXXX"/>
      </div>
    </section>

    <section class="mt">
      <label>Optional note to include</label>
      <textarea id="paxNote" rows="4" placeholder="Any extra info to include (optional)"></textarea>
      <input type="text" id="company" autocomplete="off" tabindex="-1" aria-hidden="true" class="hp"/>
    </section>

    <section class="card" id="previewCard">
      <div class="muted">Preview of the message:</div>
      <pre id="preview" class="pre"></pre>
    </section>

    <section class="actions">
      <button class="btn primary" id="sendEmail">Send Email</button>
      <a class="btn whatsapp" id="openWA" target="_blank" rel="noopener">Open WhatsApp (Click-to-Chat)</a>
      <button class="btn copy" id="copyMsg">Copy Message</button>
    </section>

    <p id="status" class="status" role="status" aria-live="polite"></p>

    <footer class="muted small">
      Emails are sent from <code>no-reply@yourdomain.com</code> (via SendGrid). WhatsApp opens a pre-filled chat with the “Open WhatsApp” button.
    </footer>
  </main>

  <script>
    window.CONFIG = {
      WORKER_URL: 'https://kenan.kenan-alhennawi.workers.dev',
      BRAND_SIGNATURE: '— Flydubai Contact Centre'
    };
  </script>
  <script src="app.js" defer></script>
</body>
</html>
